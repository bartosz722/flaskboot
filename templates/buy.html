{% extends 'base.html' %}

{% block content %}
    <h4 class="my-2">Things to buy</h4>
    <ul class="list-group">
      {% for i in model.items %}
        <li class="list-group-item buy-list-item" onclick="gotoBuyItem(this, event)">
          <div class="d-flex align-items-center">
            <img src="{{i.image}}" alt="Item image." class="buy-list-image">
            <div class="d-flex flex-grow-1 flex-wrap align-items-center">
              <a class="buy-list-name fs-5 px-2" href="/buy/items/{{i.id}}">{{i.name}}</a>
              <span class="buy-list-name-desc fs-6 px-2">{{i.description}}</span>
              <span class="buy-list-price px-2">{{i.price}} z≈Ç</span>
            </div>
          </div>
        </li>
      {% endfor %}
      </ul>

    <nav class="mt-2" aria-label="Pages">
      <ul class="pagination">
        {% set prev_href = '/buy?page={}'.format(model.pag.page - 1) if not model.pag.nav_prev_disabled else '#' %}
        {% set next_href = '/buy?page={}'.format(model.pag.page + 1) if not model.pag.nav_next_disabled else '#' %}
        {% set prev_disabled = 'disabled' if model.pag.nav_prev_disabled else '' %}
        {% set next_disabled = 'disabled' if model.pag.nav_next_disabled else '' %}
        <li class="page-item"><a class="page-link {{prev_disabled}}" href="{{prev_href}}">Previous</a></li>
        {% for p in range(model.pag.nav_from, model.pag.nav_to + 1) %}
          {% set link = '/buy?page={}'.format(p) if p != model.pag.page else '#' %}
          <li class="page-item {{'active' if p == model.pag.page}}"><a class="page-link" href="{{link}}">{{p}}</a></li>
        {% endfor %}
        <li class="page-item">
          <span class="page-link page-count-unlink">of {{model.pag.total_pages}}</span>
        </li>
        <li class="page-item {{next_disabled}}"><a class="page-link" href="{{next_href}}">Next</a></li>
      </ul>
    </nav>
{% endblock %}
